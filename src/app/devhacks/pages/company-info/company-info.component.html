<app-menu></app-menu>
<div class="container" style="margin-top:5%">
  <h1><span class="badge badge-secondary">{{company?.name}}</span></h1>

  <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-overview" role="tab" aria-controls="pills-overview"
        aria-selected="true">Overview</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-salaries-tab" data-toggle="pill" href="#pills-salaries" role="tab" aria-controls="pills-salaries"
        aria-selected="false">Salaries <span class="badge badge-success"> {{nrOfSalaries}}</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-trainings-tab" data-toggle="pill" href="#pills-trainings" role="tab" aria-controls="pills-trainings"
        aria-selected="false">Trainings <span class="badge badge-success"> {{nrOfTrainings}}</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-interviews-tab" data-toggle="pill" href="#pills-interviews" role="tab"
        aria-controls="pills-interviews" aria-selected="false">Interviews <span class="badge badge-success">
          {{nrOfInterviews}}</span></a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="pills-work-tab" data-toggle="pill" href="#pills-work" role="tab" aria-controls="pills-work"
        aria-selected="false">Work Environment <span class="badge badge-success"> {{nrOfEnvironments}}</span></a>
    </li>
  </ul>

  <div class="tab-content" id="pills-tabContent">

    <div class="tab-pane fade show active" id="pills-overview" role="tabpanel" aria-labelledby="pills-overview-tab">
      <div class="card text-white bg-dark mb-3" style="max-width: 38rem;">
        <div class="card-header">{{company?.name}} Overview</div>
        <div class="card-body">
          <p>
            <span><b>Company size: </b>{{company?.nrOfEmployees}}</span>
          </p>
          <p>
            <span><b>Location: </b>{{company?.location}}</span>
          </p>
          <p>
            <span><b>Tag: <span class="badge badge-success"> {{company?.tag.name}}</span></b></span>
          </p>
          <hr>
          <p class="card-text">{{company?.description}}</p>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="pills-salaries" role="tabpanel" aria-labelledby="pills-salaries-tab">
      <span *ngIf="nrOfSalaries > 0" style="font-size: 1.6em; padding: .18em;" class="Unicode">{{salariesSum/nrOfSalaries
        | number:'1.2-2'}} ★</span>
      <!-- Large modal -->
      <button *ngIf="user" type="button" class="btn btn-primary" data-toggle="modal" data-target=".add-salary-modal">Add
        salary review</button>

      <div class="modal add-salary-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add salary review</h5>

              <button type="button" #closeBtnSalary class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">

              <div class="row">
                <div class=col-md-12>
                  <span>Review <span class="badge badge-success">1-{{maxRatingValue}}<span style="font-size: 1.2em; padding: .12em;"
                        class="Unicode">★</span></span></span>

                  <div class="slidecontainer">
                    <div class="row">
                      <div class="col-md-11"><input [(ngModel)]="reviewRating" type="range" min="1" max="{{maxRatingValue}}"
                          value="3" class="slider" id="mySalaryRange"></div>
                      <div class="col-md-1"><span class="badge badge-warning" style="padding: 6px;">{{reviewRating}}</span></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                  <div class=col-md-12>
                    <span>Subject</span>
  
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon1">...</span>
                      </div>
                      <textarea [(ngModel)]="reviewSubject" class="form-control" aria-label="With textarea"></textarea>
                    </div>
                  </div>
                </div>
              <div class="row">
                <div class=col-md-12>
                  <span>Description</span>

                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon1">...</span>
                    </div>
                    <textarea [(ngModel)]="reviewDesc" class="form-control" aria-label="With textarea"></textarea>
                  </div>
                </div>
              </div>


              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" (click)="addSalary()" class="btn btn-primary">Add salary</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div *ngFor="let review of reviews">
        <div *ngIf="review.category == 'Salaries'" class="card text-white bg-dark mb-3" style="max-width: 40rem;">
          <div class="card-header"><span class="badge badge-warning">{{review?.user?.name}}</span></div>
          <div class="card-body">
              <h4>{{review?.subject}}</h4>
            <h5 class="card-title">
              Rating:
              <span *ngFor="let dummy of ' '.repeat(review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">★</span>
              <span *ngFor="let dummy of ' '.repeat(5-review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">☆</span>
            </h5>
            <p class="card-text">{{review?.description}}</p>
          </div>
        </div>
      </div>


    </div>

    <div class="tab-pane fade" id="pills-trainings" role="tabpanel" aria-labelledby="pills-trainings-tab">
      <span *ngIf="nrOfTrainings > 0" style="font-size: 1.6em; padding: .18em;" class="Unicode">{{trainingsSum/nrOfTrainings
        | number:'1.2-2'}} ★</span>

      <!-- Large modal -->
      <button *ngIf="user" type="button" class="btn btn-primary" data-toggle="modal" data-target=".add-training-modal">Add
        training review</button>

      <div class="modal add-training-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add training review</h5>

              <button type="button" #closeBtnTraining class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">

              <div class="row">
                <div class=col-md-12>
                  <span>Review <span class="badge badge-success">1-{{maxRatingValue}}<span style="font-size: 1.2em; padding: .12em;"
                        class="Unicode">★</span></span>
                  </span>

                  <div class="slidecontainer">
                    <div class="row">
                      <div class="col-md-11"><input [(ngModel)]="trainingRating" type="range" min="1" max="{{maxRatingValue}}"
                          value="3" class="slider" id="myTrainingRange"></div>
                      <div class="col-md-1">
                        <span class="badge badge-warning" style="padding: 6px;">{{trainingRating}}</span>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class=col-md-12>
                  <span>Subject</span>

                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon1">...</span>
                    </div>
                    <textarea [(ngModel)]="trainingSubject" class="form-control" aria-label="With textarea"></textarea>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class=col-md-12>
                  <span>Description</span>

                  <div class="input-group mb-3">
                    <div class="input-group-prepend">
                      <span class="input-group-text" id="basic-addon1">...</span>
                    </div>
                    <textarea [(ngModel)]="trainingDesc" class="form-control" aria-label="With textarea"></textarea>
                  </div>
                </div>
              </div>


              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" (click)="addTraining()" class="btn btn-primary">Add training</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div *ngFor="let review of reviews">

        <div *ngIf="review.category == 'Trainings'" class="card text-white bg-dark mb-3" style="max-width: 40rem;">
          <div class="card-header"><span class="badge badge-warning">{{review?.user?.name}}</span></div>
          <div class="card-body">
            <h4>{{review?.subject}}</h4>
            
            <h5 class="card-title">
              Rating:
              <span *ngFor="let dummy of ' '.repeat(review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">★</span>
              <span *ngFor="let dummy of ' '.repeat(5-review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">☆</span>
            </h5>
            <p class="card-text">{{review?.description}}</p>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="pills-interviews" role="tabpanel" aria-labelledby="pills-interviews-tab">
      <span *ngIf="nrOfInterviews > 0" style="font-size: 1.6em; padding: .18em;" class="Unicode">{{interviewsSum/nrOfInterviews
        | number:'1.2-2'}} ★</span>

      <div *ngFor="let review of reviews">

        <div *ngIf="review.category == 'Interviews'" class="card text-white bg-dark mb-3" style="max-width: 40rem;">
          <div class="card-header"><span class="badge badge-warning">{{review?.user?.name}}</span></div>
          <div class="card-body">
            <h5 class="card-title">
              Rating:
              <span *ngFor="let dummy of ' '.repeat(review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">★</span>
              <span *ngFor="let dummy of ' '.repeat(maxRatingValue-review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">☆</span>
            </h5>
            <p class="card-text">{{review?.description}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="pills-work" role="tabpanel" aria-labelledby="pills-work-tab">
      <span *ngIf="nrOfEnvironments > 0" style="font-size: 1.6em; padding: .18em;" class="Unicode">{{environmentsSum/nrOfEnvironments
        | number:'1.2-2'}} ★</span>

      <div *ngFor="let review of reviews">

        <div *ngIf="review.category == 'Environment'" class="card text-white bg-dark mb-3" style="max-width: 40rem;">
          <div class="card-header"><span class="badge badge-warning">{{review?.user?.name}}</span></div>
          <div class="card-body">
            <h5 class="card-title">
              Rating:
              <span *ngFor="let dummy of ' '.repeat(review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">★</span>
              <span *ngFor="let dummy of ' '.repeat(maxRatingValue-review?.rating).split(''), let x = index" style="font-size: 1.6em; padding: .18em;"
                class="Unicode">☆</span>
            </h5>
            <p class="card-text">{{review?.description}}</p>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>